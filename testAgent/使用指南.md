# 快速使用指南

## 🚀 快速开始

### Windows 用户

1. **双击运行** `testAgent/start.bat` 文件

或者手动执行：

```bash
cd testAgent
pip install -r requirements.txt
playwright install chromium
python main.py
```

### Linux/Mac 用户

1. **运行启动脚本**：
```bash
chmod +x testAgent/start.sh
./testAgent/start.sh
```

或者手动执行：

```bash
cd testAgent
pip install -r requirements.txt
playwright install chromium
python main.py
```

## 🧠 智能体架构

本测试智能体采用三层架构设计：

- **Planner (规划者)**：理解您的自然语言需求，生成结构化测试计划
- **Actor (执行者)**：使用 Playwright 执行测试步骤，自动操作浏览器
- **Reporter (分析者)**：对比执行结果与预期结果，生成详细报告

## 📝 使用步骤

### 方式一：对话式智能测试（推荐）

#### 第一步：启动程序

运行启动脚本或执行 `python testAgent/main.py`

#### 第二步：使用自然语言描述测试需求

直接告诉智能体您想测试什么：

```
测试智能体> plan 测试一下创建知识库的功能，看看上传 PDF 后会不会报错
```

智能体会生成一个详细的测试计划，包含：
- 测试步骤列表
- 每个步骤的预期结果
- 验证点

#### 第三步：执行测试计划

查看计划后，执行测试：

```
测试智能体> exec
```

或者直接一步生成并执行：

```
测试智能体> exec 测试登录功能，验证用户名密码输入是否正确
```

#### 第四步：查看报告

生成测试报告：

```
测试智能体> report
```

程序会询问是否在浏览器中打开 HTML 报告。

### 方式二：传统测试场景

#### 第一步：查看可用测试场景

```
测试智能体> list
```

这会显示所有预定义的测试场景。

#### 第二步：运行测试

运行单个测试：
```
测试智能体> run 首页测试
```

运行所有测试：
```
测试智能体> run all
```

#### 第三步：查看报告

```
测试智能体> report
```

## 💡 常用命令速查

### 智能测试命令（新功能）

| 命令 | 说明 | 示例 |
|------|------|------|
| `plan <需求>` | 生成测试计划（不执行） | `plan 测试登录功能` |
| `exec` | 执行最近生成的计划 | `exec` |
| `exec <需求>` | 直接生成并执行计划 | `exec 测试上传文件功能` |

### 传统测试命令

| 命令 | 说明 | 示例 |
|------|------|------|
| `list` | 列出所有测试场景 | `list` |
| `run <场景名>` | 运行指定测试场景 | `run 首页测试` |
| `run all` | 运行所有测试场景 | `run all` |
| `report` | 生成测试报告 | `report` |
| `status` | 查看测试状态 | `status` |
| `help` | 显示帮助信息 | `help` |
| `exit` | 退出程序 | `exit` |

## 🎯 使用示例

### 示例 1: 测试登录功能

```
测试智能体> exec 测试登录功能，输入用户名和密码，验证是否能成功登录
```

智能体会：
1. 生成登录测试计划
2. 自动打开浏览器
3. 导航到登录页面
4. 填写用户名和密码（从环境变量读取）
5. 点击登录按钮
6. 验证登录结果
7. 生成测试报告

### 示例 2: 测试知识库创建

```
测试智能体> plan 测试创建知识库功能，上传一个 PDF 文件，检查是否报错
```

查看计划后：

```
测试智能体> exec
```

### 示例 3: 测试页面导航

```
测试智能体> exec 测试首页的所有导航链接是否正常工作
```

### 示例 4: 使用预定义场景

```
测试智能体> list
测试智能体> run 首页测试
测试智能体> run all
```

## 🔑 环境变量配置（可选）

如果需要测试登录功能，可以设置环境变量：

**Windows (PowerShell):**
```powershell
$env:TEST_USERNAME="your_username"
$env:TEST_PASSWORD="your_password"
```

**Linux/Mac:**
```bash
export TEST_USERNAME="your_username"
export TEST_PASSWORD="your_password"
```

或者在 `testAgent/config.py` 中直接配置。

## 📂 报告位置

测试报告保存在：
- `testAgent/reports/` - HTML 和文本报告
- `testAgent/screenshots/` - 测试截图

报告包含：
- ✅ 测试摘要（总数、通过、失败、执行时长）
- 📋 详细的测试步骤和执行结果
- 🖼️ 关键步骤的截图
- ❌ 错误信息和日志（如果有）

## 🎨 智能体特性

### Planner 支持的测试类型

智能体可以理解以下类型的测试需求：

- **登录测试**：包含"登录"、"login"等关键词
- **文件上传**：包含"上传"、"upload"、"PDF"等关键词
- **知识库操作**：包含"知识库"、"创建"等关键词
- **导航测试**：包含"导航"、"链接"、"跳转"等关键词
- **表单填写**：包含"填写"、"输入"、"表单"等关键词
- **通用测试**：其他需求会生成通用的页面健康检查计划

### Actor 执行能力

- ✅ 自动打开浏览器
- ✅ 页面导航和等待
- ✅ 元素查找和交互（点击、输入、选择）
- ✅ 表单填写和提交
- ✅ 文件上传
- ✅ 截图记录
- ✅ 页面内容提取和验证

### Reporter 分析能力

- ✅ 步骤级结果对比
- ✅ 预期结果验证
- ✅ 错误信息提取
- ✅ 截图证据收集
- ✅ 生成可视化报告

## ❓ 遇到问题？

1. **浏览器无法启动**：运行 `playwright install chromium`
2. **依赖安装失败**：确保使用 Python 3.8+
3. **权限错误**：确保对项目目录有写入权限
4. **计划生成失败**：检查网络连接，确保可以访问目标网站
5. **执行超时**：在 `config.py` 中调整 `timeout` 配置

## 📚 更多信息

- 详细文档：查看 `README.md`
- 架构说明：了解 Planner/Actor/Reporter 三层架构
- 自定义场景：学习如何添加自己的测试场景
- 配置选项：查看 `config.py` 了解所有配置项

## 🚀 快速开始示例

```bash
# 1. 安装依赖
cd testAgent
pip install -r requirements.txt
playwright install chromium

# 2. 启动智能体
python main.py

# 3. 在交互界面中输入：
测试智能体> exec 测试首页加载和基本功能

# 4. 查看报告
测试智能体> report
```

现在就开始使用智能体，让 AI 帮您自动化测试吧！🎉
